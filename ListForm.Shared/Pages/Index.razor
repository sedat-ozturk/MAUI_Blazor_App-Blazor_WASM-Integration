@page "/"
@using ListForm.Domain.Entities
@using ListForm.Domain.Interfaces
@using ListForm.Infrastructure.Repository

<PageTitle>Index</PageTitle>

<DataGrid TItem="Product"
          Data="@productList"
          Responsive
          Filterable>
    <DataGridCommandColumn />
    <DataGridColumn Field="@nameof(Product.Id)" Caption="#" Sortable="false" />
    <DataGridColumn Field="@nameof(Product.Name)" Caption="Name" Editable />
    <DataGridColumn Field="@nameof(Product.Description)" Caption="Description" Editable />
    <DataGridColumn Field="@nameof(Product.AddedOn)" Caption="AddedOn" Editable />
</DataGrid>

@code {
    private List<Product> productList;

    [Inject]
    public IProductRepository ProductRepo { get; set; }

    protected override async Task OnInitializedAsync()
    {
        productList = await ProductRepo.GetAllAsync();
    }

    //[Inject]
    //public HttpClient _httpClient { get; set; }

    //protected override async Task OnInitializedAsync()
    //{
    //    var baseURL = "https://localhost:7114";

    //    productList = await _httpClient.GetFromJsonAsync<List<Product>>($"{baseURL}/api/Product");
    //}
}