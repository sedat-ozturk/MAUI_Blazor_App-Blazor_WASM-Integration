@page "/"
@using ListForm.Domain.Entities
@using ListForm.Domain.Repository

<PageTitle>Index</PageTitle>

<DataGrid TItem="Product"
          Data="@productList"
          Responsive>
    <DataGridCommandColumn />
    <DataGridColumn Field="@nameof(Product.Id)" Caption="#" Sortable="false" />
    <DataGridColumn Field="@nameof(Product.Name)" Caption="Name" Editable />
    <DataGridColumn Field="@nameof(Product.Description)" Caption="Description" Editable />
    <DataGridColumn Field="@nameof(Product.AddedOn)" Caption="AddedOn" Editable />
</DataGrid>

@code {
    private List<Product> productList;

    [Inject]
    public HttpClient _httpClient { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var response = await _httpClient.GetAsync("https://localhost:7114/api/Product");
        response.EnsureSuccessStatusCode();
        productList = await response.Content.ReadFromJsonAsync<List<Product>>();

    }

}