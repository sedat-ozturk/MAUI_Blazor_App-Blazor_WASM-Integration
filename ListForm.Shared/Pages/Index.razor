@page "/"
@using ListForm.Api.Application.Interfaces
@using ListForm.Api.Core.Entities
@using ListForm.Api.Infrastructure.Repository
@using ListForm.Shared.Interfaces

<PageTitle>Index</PageTitle>

<DataGrid TItem="Product"
          Data="@productList"
          Responsive>
    <DataGridCommandColumn />
    <DataGridColumn Field="@nameof(Product.Id)" Caption="#" Sortable="false" />
    <DataGridColumn Field="@nameof(Product.Name)" Caption="Name" Editable />
    <DataGridColumn Field="@nameof(Product.Description)" Caption="Description" Editable />
    <DataGridColumn Field="@nameof(Product.AddedOn)" Caption="AddedOn" Editable />
</DataGrid>

@code {
    [Inject]
    public ProductRepository ProductData { get; set; }
    private List<Product> productList;
    private Product selectedProduct;

    protected override async Task OnInitializedAsync()
    {
        productList = await ProductData.GetAllAsync();
        await base.OnInitializedAsync();
    }
}